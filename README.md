
<!-- README.md is generated from README.Rmd. Please edit that file -->
rTAGS
=====

The goal of rTAGS is to make it easy to work with Twitter data collected via [TAGS](https://tags.hawksey.info/) in R. This package makes ample use of the [{rtweet} package](https://rtweet.info/) to process and prepare the data.

Installation
------------

You can install the released version of rTAGS from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("devtools")
devtools::install_github('bretsw/rTAGS)
```

Example
-------

This is a basic example which shows you how to read a TAGS sheet and then use {rtweet} (via `pull_data()`) to access additional data.

``` r
library(rTAGS)
library(tidyverse)

d <- "https://docs.google.com/spreadsheets/d/1WM2xWG9B0Wqn3YG5uakfy_NSAEzIFP2nEAJ5U_fqufc/edit#gid=8743918" %>%
        read_tags() %>% 
        pull_data(n = 500)
```

Here is the result:

``` r
glimpse(d)
#> Observations: 406
#> Variables: 88
#> $ user_id                 <chr> "16737531", "535942672", "136829835", "1…
#> $ status_id               <chr> "1120765121356357632", "1120809614365192…
#> $ created_at              <dttm> 2019-04-23 19:03:22, 2019-04-23 22:00:1…
#> $ screen_name             <chr> "quincee", "travesty328", "Ashley_Isreal…
#> $ text                    <chr> "Did you attend #aera19? Or are a member…
#> $ source                  <chr> "Twitter for iPhone", "Twitter for iPhon…
#> $ display_text_width      <dbl> 140, 140, 140, 148, 140, 140, 140, 140, …
#> $ reply_to_status_id      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ reply_to_user_id        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ reply_to_screen_name    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ is_quote                <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…
#> $ is_retweet              <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE…
#> $ favorite_count          <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
#> $ retweet_count           <int> 1, 2, 2, 7, 7, 3, 3, 3, 1, 2, 1, 7, 6, 1…
#> $ hashtags                <list> ["aera19", NA, NA, NA, NA, "AERA19", <"…
#> $ symbols                 <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ urls_url                <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ urls_t.co               <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ urls_expanded_url       <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ media_url               <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ media_t.co              <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ media_expanded_url      <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ media_type              <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ ext_media_url           <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ ext_media_t.co          <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ ext_media_expanded_url  <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ ext_media_type          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ mentions_user_id        <list> [<"902540655595016192", "76682760">, "1…
#> $ mentions_screen_name    <list> [<"KrisVeeVee", "AERA_EdResearch">, "us…
#> $ lang                    <chr> "en", "en", "en", "en", "en", "en", "en"…
#> $ quoted_status_id        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_text             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_created_at       <dttm> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
#> $ quoted_source           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_favorite_count   <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_retweet_count    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_user_id          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_screen_name      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_name             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_followers_count  <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_friends_count    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_statuses_count   <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_location         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_description      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_verified         <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ retweet_status_id       <chr> "1120762169270919173", "1120798210958581…
#> $ retweet_text            <chr> "Did you attend #aera19? Or are a member…
#> $ retweet_created_at      <dttm> 2019-04-23 18:51:38, 2019-04-23 21:14:5…
#> $ retweet_source          <chr> "Twitter Web Client", "Twitter Web Clien…
#> $ retweet_favorite_count  <int> 0, 5, 6, 20, 41, 2, 3, 3, 2, 7, 7, 8, 8,…
#> $ retweet_retweet_count   <int> 1, 2, 2, 7, 7, 3, 3, 3, 1, 2, 1, 7, 6, 1…
#> $ retweet_user_id         <chr> "902540655595016192", "177618414", "3854…
#> $ retweet_screen_name     <chr> "KrisVeeVee", "usuCEHS", "LindseyDHammon…
#> $ retweet_name            <chr> "Kris Vogt Veggeberg", "USU CEHS", "Lind…
#> $ retweet_followers_count <int> 233, 463, 736, 20, 637, 2358, 143, 150, …
#> $ retweet_friends_count   <int> 425, 410, 1373, 67, 209, 1183, 249, 309,…
#> $ retweet_statuses_count  <int> 4195, 2206, 2264, 4, 2487, 4535, 1419, 3…
#> $ retweet_location        <chr> "Chicago, IL", "Utah State University", …
#> $ retweet_description     <chr> "PhD candidate @UIC_CollegeofEd, proud a…
#> $ retweet_verified        <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…
#> $ place_url               <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ place_name              <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ place_full_name         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ place_type              <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ country                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ country_code            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ geo_coords              <list> [<NA, NA>, <NA, NA>, <NA, NA>, <NA, NA>…
#> $ coords_coords           <list> [<NA, NA>, <NA, NA>, <NA, NA>, <NA, NA>…
#> $ bbox_coords             <list> [<NA, NA, NA, NA, NA, NA, NA, NA>, <NA,…
#> $ status_url              <chr> "https://twitter.com/quincee/status/1120…
#> $ name                    <chr> "quincee", "Travis N Thurston \u26a1️", …
#> $ location                <chr> "Florida, USA", "Utah, USA", "Clemson, S…
#> $ description             <chr> "PhD candidate; reader; writer; Counselo…
#> $ url                     <chr> NA, "https://t.co/CsVklF33oO", NA, "http…
#> $ protected               <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…
#> $ followers_count         <int> 536, 1757, 386, 5, 9, 7430, 1074, 1074, …
#> $ friends_count           <int> 1469, 4161, 384, 67, 66, 2796, 498, 498,…
#> $ listed_count            <int> 32, 52, 8, 0, 0, 137, 34, 34, 0, 0, 55, …
#> $ statuses_count          <int> 27822, 5068, 9340, 298, 276, 6415, 3741,…
#> $ favourites_count        <int> 11835, 13170, 392, 295, 265, 1793, 1114,…
#> $ account_created_at      <dttm> 2008-10-14 13:13:18, 2012-03-25 03:10:3…
#> $ verified                <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…
#> $ profile_url             <chr> NA, "https://t.co/CsVklF33oO", NA, "http…
#> $ profile_expanded_url    <chr> NA, "http://lnkd.in/Qs7-QR", NA, "https:…
#> $ account_lang            <chr> "en", "en", "en", "en", "en", "en", "en"…
#> $ profile_banner_url      <chr> "https://pbs.twimg.com/profile_banners/1…
#> $ profile_background_url  <chr> "http://abs.twimg.com/images/themes/them…
#> $ profile_image_url       <chr> "http://pbs.twimg.com/profile_images/111…
```

Creating an edgelist from the TAGS data
---------------------------------------

``` r
edgelist <- create_edgelist(d)

edgelist
#> # A tibble: 1,025 x 3
#>    sender          receiver        edge_type
#>    <chr>           <chr>           <chr>    
#>  1 quincee         KrisVeeVee      retweet  
#>  2 travesty328     usuCEHS         retweet  
#>  3 Ashley_Isreal   LindseyDHammond retweet  
#>  4 graphanispai    montenErick     retweet  
#>  5 reerscunatil    jclarson        retweet  
#>  6 BERANews        WileyEducation  retweet  
#>  7 RichardMessina2 JChristieLiu    retweet  
#>  8 RichardMessina2 ms_emilyhorner  retweet  
#>  9 xaliwansu       MsSamSalem      retweet  
#> 10 EduardoFortane4 Dark_knightLafc retweet  
#> # … with 1,015 more rows

edgelist %>% 
  count(edge_type)
#> # A tibble: 4 x 2
#>   edge_type     n
#>   <chr>     <int>
#> 1 mention     698
#> 2 quotes       13
#> 3 reply        13
#> 4 retweet     301
```

If you want to simply view the TAGS archive, you can use `read_tags()`:

``` r
d1 <- "https://docs.google.com/spreadsheets/d/1WM2xWG9B0Wqn3YG5uakfy_NSAEzIFP2nEAJ5U_fqufc/edit#gid=8743918" %>% 
        read_tags()
```

Other functionality
-------------------

We are working to add gender coding (see `gender-coding.R` for a worked example).
