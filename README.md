
<!-- README.md is generated from README.Rmd. Please edit that file -->
rTAGS
=====

The goal of rTAGS is to make it easy to work with Twitter data collected via [TAGS](https://tags.hawksey.info/) in R. This package makes ample use of the [{rtweet} package](https://rtweet.info/) to process and prepare the data.

Installation
------------

You can install the released version of rTAGS from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("devtools")
devtools::install_github('bretsw/rTAGS)
```

Example
-------

This is a basic example which shows you how to read a TAGS sheet and then use {rtweet} (via `pull_data()`) to access additional data.

``` r
library(rTAGS)
library(tidyverse)

d <- "https://docs.google.com/spreadsheets/d/1WM2xWG9B0Wqn3YG5uakfy_NSAEzIFP2nEAJ5U_fqufc/edit#gid=8743918" %>%
        read_tags() %>% 
        pull_data()
```

Here is the result:

``` r
glimpse(d)
#> Observations: 29,836
#> Variables: 88
#> $ user_id                 <chr> "17851248", "17851248", "112228722661052…
#> $ status_id               <chr> "1126613568114319361", "1123336976374095…
#> $ created_at              <dttm> 2019-05-09 22:23:00, 2019-04-30 21:23:0…
#> $ screen_name             <chr> "UHawaiiNews", "UHawaiiNews", "DP_Discou…
#> $ text                    <chr> "\U0001f440 #UHohana faculty members wer…
#> $ source                  <chr> "Sprout Social", "Sprout Social", "Twitt…
#> $ display_text_width      <dbl> 184, 184, 140, 140, 187, 113, 247, 141, …
#> $ reply_to_status_id      <chr> NA, NA, NA, NA, NA, "1114968302395252742…
#> $ reply_to_user_id        <chr> NA, NA, NA, NA, NA, "76682760", NA, "766…
#> $ reply_to_screen_name    <chr> NA, NA, NA, NA, NA, "AERA_EdResearch", N…
#> $ is_quote                <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…
#> $ is_retweet              <lgl> FALSE, FALSE, TRUE, TRUE, FALSE, FALSE, …
#> $ favorite_count          <int> 0, 4, 0, 0, 2, 9, 1, 4, 242, 11, 9, 8, 0…
#> $ retweet_count           <int> 0, 0, 4, 5, 2, 1, 0, 1, 33, 3, 2, 3, 5, …
#> $ hashtags                <list> [<"UHohana", "AERA19">, <"UHohana", "AE…
#> $ symbols                 <list> [NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
#> $ urls_url                <list> ["hawaii.edu/news/2019/04/2…", "hawaii.…
#> $ urls_t.co               <list> ["https://t.co/3n3vZzUVDJ", "https://t.…
#> $ urls_expanded_url       <list> ["https://www.hawaii.edu/news/2019/04/2…
#> $ media_url               <list> [NA, NA, NA, NA, "http://pbs.twimg.com/…
#> $ media_t.co              <list> [NA, NA, NA, NA, "https://t.co/1WgaiWdh…
#> $ media_expanded_url      <list> [NA, NA, NA, NA, "https://twitter.com/A…
#> $ media_type              <list> [NA, NA, NA, NA, "photo", "photo", "pho…
#> $ ext_media_url           <list> [NA, NA, NA, NA, "http://pbs.twimg.com/…
#> $ ext_media_t.co          <list> [NA, NA, NA, NA, "https://t.co/1WgaiWdh…
#> $ ext_media_expanded_url  <list> [NA, NA, NA, NA, "https://twitter.com/A…
#> $ ext_media_type          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ mentions_user_id        <list> ["76682760", "76682760", <"909844339005…
#> $ mentions_screen_name    <list> ["AERA_EdResearch", "AERA_EdResearch", …
#> $ lang                    <chr> "en", "en", "en", "en", "en", "en", "en"…
#> $ quoted_status_id        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_text             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_created_at       <dttm> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
#> $ quoted_source           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_favorite_count   <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_retweet_count    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_user_id          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_screen_name      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_name             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_followers_count  <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_friends_count    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_statuses_count   <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_location         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_description      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ quoted_verified         <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ retweet_status_id       <chr> NA, NA, "1114556812450091008", "11152084…
#> $ retweet_text            <chr> NA, NA, "Shout out to @AERASIG_Latinx fo…
#> $ retweet_created_at      <dttm> NA, NA, 2019-04-06 15:53:46, 2019-04-08…
#> $ retweet_source          <chr> NA, NA, "Twitter for iPhone", "TweetDeck…
#> $ retweet_favorite_count  <int> NA, NA, 17, 19, NA, NA, NA, NA, NA, NA, …
#> $ retweet_retweet_count   <int> NA, NA, 4, 5, NA, NA, NA, NA, NA, NA, NA…
#> $ retweet_user_id         <chr> NA, NA, "909844339005693953", "38508931"…
#> $ retweet_screen_name     <chr> NA, NA, "Dra_LuzYadira", "UF_COE", NA, N…
#> $ retweet_name            <chr> NA, NA, "Luz Yadira Herrera", "UF Colleg…
#> $ retweet_followers_count <int> NA, NA, 287, 3550, NA, NA, NA, NA, NA, N…
#> $ retweet_friends_count   <int> NA, NA, 216, 771, NA, NA, NA, NA, NA, NA…
#> $ retweet_statuses_count  <int> NA, NA, 340, 3643, NA, NA, NA, NA, NA, N…
#> $ retweet_location        <chr> NA, NA, "California, USA", "Gainesville,…
#> $ retweet_description     <chr> NA, NA, "Mamá de Remi \U0001f466\U0001f3…
#> $ retweet_verified        <lgl> NA, NA, FALSE, FALSE, NA, NA, NA, NA, NA…
#> $ place_url               <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ place_name              <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ place_full_name         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ place_type              <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ country                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ country_code            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ geo_coords              <list> [<NA, NA>, <NA, NA>, <NA, NA>, <NA, NA>…
#> $ coords_coords           <list> [<NA, NA>, <NA, NA>, <NA, NA>, <NA, NA>…
#> $ bbox_coords             <list> [<NA, NA, NA, NA, NA, NA, NA, NA>, <NA,…
#> $ status_url              <chr> "https://twitter.com/UHawaiiNews/status/…
#> $ name                    <chr> "University of Hawaii System", "Universi…
#> $ location                <chr> "Hawaiian Islands", "Hawaiian Islands", …
#> $ description             <chr> "10 campuses, 6 islands, 1 UH System #Ha…
#> $ url                     <chr> "https://t.co/GqPySYpS5c", "https://t.co…
#> $ protected               <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…
#> $ followers_count         <int> 30073, 30073, 74, 10, 31743, 31743, 3174…
#> $ friends_count           <int> 2254, 2254, 781, 48, 7661, 7661, 7661, 7…
#> $ listed_count            <int> 679, 679, 1, 0, 679, 679, 679, 679, 679,…
#> $ statuses_count          <int> 14912, 14912, 413, 95, 11863, 11863, 118…
#> $ favourites_count        <int> 5830, 5830, 453, 84, 7509, 7509, 7509, 7…
#> $ account_created_at      <dttm> 2008-12-03 22:24:21, 2008-12-03 22:24:2…
#> $ verified                <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…
#> $ profile_url             <chr> "https://t.co/GqPySYpS5c", "https://t.co…
#> $ profile_expanded_url    <chr> "http://uhnews.org", "http://uhnews.org"…
#> $ account_lang            <chr> "en", "en", "en", "en", "en", "en", "en"…
#> $ profile_banner_url      <chr> "https://pbs.twimg.com/profile_banners/1…
#> $ profile_background_url  <chr> "http://abs.twimg.com/images/themes/them…
#> $ profile_image_url       <chr> "http://pbs.twimg.com/profile_images/963…
```

Creating an edgelist from the TAGS data
---------------------------------------

``` r
edgelist <- create_edgelist(d)

edgelist %>% 
  count(edge_type)
#> # A tibble: 4 x 2
#>   edge_type     n
#>   <chr>     <int>
#> 1 mention   43406
#> 2 quotes     1395
#> 3 reply      1881
#> 4 retweet   16710
```

If you want to simply view the TAGS archive, you can use `read_tags()`:

``` r
d1 <- "https://docs.google.com/spreadsheets/d/1WM2xWG9B0Wqn3YG5uakfy_NSAEzIFP2nEAJ5U_fqufc/edit#gid=8743918" %>% 
        read_tags()
```

Other functionality
-------------------

We are working to add gender coding (see `gender-coding.R` for a worked example).
